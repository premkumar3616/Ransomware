
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <title>CRITICAL SYSTEM BREACH</title>
  
  <link rel="manifest" href="manifest.json">
  
  <!-- Mobile App Meta Tags -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#000000">
  
  <!-- Dependencies -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <style>
    @keyframes glitch {
      0% { transform: translate(0); }
      20% { transform: translate(-2px, 2px); }
      40% { transform: translate(-2px, -2px); }
      60% { transform: translate(2px, 2px); }
      80% { transform: translate(2px, -2px); }
      100% { transform: translate(0); }
    }
    .glitch-text {
      animation: glitch 0.2s infinite;
      text-shadow: 2px 0 #ff0000, -2px 0 #00ffff;
    }
    body {
      background-color: #000;
      margin: 0;
      overflow: hidden;
      color: #ff0000;
      font-family: 'Courier New', Courier, monospace;
      overscroll-behavior-y: contain;
      touch-action: none;
      -webkit-user-select: none;
      user-select: none;
      height: 100vh;
      width: 100vw;
    }
    #root {
      height: 100%;
      width: 100%;
      position: relative;
      z-index: 1;
    }
    .crt::after {
      content: " ";
      display: block;
      position: absolute;
      top: 0; left: 0; bottom: 0; right: 0;
      background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), 
                  linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
      z-index: 100;
      background-size: 100% 4px, 3px 100%;
      pointer-events: none;
    }
    .noise {
      position: fixed;
      top: 0; left: 0; width: 100vw; height: 100vh;
      z-index: 99;
      opacity: 0.05;
      pointer-events: none;
      background: url('https://grainy-gradients.vercel.app/noise.svg');
    }
    .scan-line {
      width: 100%;
      height: 100px;
      z-index: 101;
      background: linear-gradient(0deg, rgba(0, 0, 0, 0) 0%, rgba(255, 0, 0, 0.1) 50%, rgba(0, 0, 0, 0) 100%);
      opacity: 0.1;
      position: absolute;
      bottom: 100%;
      animation: scanline 6s linear infinite;
    }
    @keyframes scanline {
      0% { bottom: 100%; }
      100% { bottom: -100px; }
    }
  </style>

  <script type="importmap">
  {
    "imports": {
      "react": "https://esm.sh/react@19.0.0",
      "react-dom/client": "https://esm.sh/react-dom@19.0.0/client",
      "lucide-react": "https://esm.sh/lucide-react@0.460.0"
    }
  }
  </script>
</head>
<body class="crt">
  <div class="noise"></div>
  <div class="scan-line"></div>
  <div id="root"></div>
  
  <script type="text/babel" data-type="module">
    import React, { useState, useEffect, useRef } from 'react';
    import ReactDOM from 'react-dom/client';
    import { 
      Terminal, ShieldAlert, Ghost, Lock, Unlock, 
      AlertTriangle, CheckCircle, Power, Eye, Radio, Activity 
    } from 'lucide-react';

    const UNLOCK_PHRASE = "job holder";

    const App = () => {
      const [screen, setScreen] = useState('LOCKED');
      const [inputText, setInputText] = useState("");
      const [logs, setLogs] = useState([]);
      const [purgeLogs, setPurgeLogs] = useState([]);
      const [showScare, setShowScare] = useState(false);
      const audioContextRef = useRef(null);
      const logEndRef = useRef(null);

      const breachLogs = [
        "INITIALIZING SYSTEM OVERRIDE...",
        "BYPASSING KERNEL SECURITY...",
        "ROOT ACCESS GRANTED: 0x882A1",
        "ENCRYPTING USER DATA...",
        "SENDING COORDINATES TO MASTER SERVER...",
        "I SEE YOU THROUGH THE LENS...",
        "HIJACKING MICROPHONE FEED...",
        "THERMAL THROTTLING DETECTED...",
        "UPLOADING PRIVATE_KEYS.DAT...",
        "STAGING ATTACK VECTOR..."
      ];

      const restorationLogs = [
        "AUTHORIZATION GRANTED",
        "STOPPING DATA EXFILTRATION...",
        "RESTORING KERNEL INTEGRITY...",
        "SYSTEM INTEGRITY: 100%",
        "SHUTTING DOWN...",
      ];

      const initAudio = () => {
        if (!audioContextRef.current) {
          audioContextRef.current = new (window.AudioContext || window.webkitAudioContext)();
        }
      };

      const playScareSound = () => {
        if (!audioContextRef.current) return;
        const ctx = audioContextRef.current;
        const osc = ctx.createOscillator();
        const gain = ctx.createGain();
        osc.type = 'sawtooth';
        osc.frequency.setValueAtTime(100, ctx.currentTime);
        osc.frequency.exponentialRampToValueAtTime(10, ctx.currentTime + 0.2);
        gain.gain.setValueAtTime(0.3, ctx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.2);
        osc.connect(gain);
        gain.connect(ctx.destination);
        osc.start();
        osc.stop(ctx.currentTime + 0.2);
      };

      useEffect(() => {
        const handlePopState = () => {
          window.history.pushState(null, "", window.location.href);
          if (navigator.vibrate) navigator.vibrate([200, 100, 200]);
        };
        window.history.pushState(null, "", window.location.href);
        window.addEventListener('popstate', handlePopState);
        return () => window.removeEventListener('popstate', handlePopState);
      }, []);

      useEffect(() => {
        if (screen === 'LOCKED') {
          let i = 0;
          const interval = setInterval(() => {
            setLogs(prev => [...prev, breachLogs[i % breachLogs.length]].slice(-14));
            i++;
            if (Math.random() > 0.95) {
              setShowScare(true);
              playScareSound();
              if (navigator.vibrate) navigator.vibrate([100, 50, 100]);
              setTimeout(() => setShowScare(false), 150);
            }
          }, 600);
          return () => clearInterval(interval);
        }
      }, [screen]);

      useEffect(() => {
        if (screen === 'PURGING') {
          let i = 0;
          const interval = setInterval(() => {
            if (i < restorationLogs.length) {
              setPurgeLogs(prev => [...prev, restorationLogs[i]]);
              if (navigator.vibrate) navigator.vibrate(20);
              i++;
            } else {
              clearInterval(interval);
              if (navigator.vibrate) navigator.vibrate([500]);
              setTimeout(() => setScreen('OFFLINE'), 1500);
            }
          }, 300);
          return () => clearInterval(interval);
        }
      }, [screen]);

      useEffect(() => {
        logEndRef.current?.scrollIntoView({ behavior: 'smooth' });
      }, [logs, purgeLogs]);

      const handleInputChange = (e) => {
        initAudio();
        const val = e.target.value.toLowerCase();
        setInputText(val);
        if (val === UNLOCK_PHRASE) {
          if (navigator.vibrate) navigator.vibrate([100, 100, 100]);
          setScreen('DECODING');
          setTimeout(() => setScreen('PURGING'), 1500);
        }
      };

      if (screen === 'OFFLINE') {
        return (
          <div className="h-screen w-screen bg-black flex items-center justify-center">
            <div className="w-1 h-6 bg-white/20 animate-pulse"></div>
          </div>
        );
      }

      if (screen === 'DECODING') {
        return (
          <div className="h-screen w-screen bg-white flex flex-col items-center justify-center p-8 animate-pulse">
            <Unlock size={80} className="text-black mb-4" />
            <h2 className="text-2xl font-black text-black tracking-widest uppercase italic">Decrypted...</h2>
          </div>
        );
      }

      if (screen === 'PURGING') {
        return (
          <div className="h-screen w-screen bg-black p-6 font-mono flex flex-col overflow-hidden">
            <div className="mb-4 flex items-center gap-3 text-green-500 border-b border-green-900 pb-2">
              <CheckCircle size={20} />
              <span className="font-bold uppercase tracking-widest text-xs">Purging System Infection</span>
            </div>
            <div className="flex-1 overflow-y-auto space-y-2">
              {purgeLogs.map((log, idx) => (
                <div key={idx} className="text-green-500 text-sm flex gap-2">
                  <span className="opacity-30">[{idx.toString().padStart(2, '0')}]</span>
                  <span className="animate-in fade-in slide-in-from-left-2 duration-300">
                    {log}
                  </span>
                </div>
              ))}
              <div ref={logEndRef} />
            </div>
          </div>
        );
      }

      return (
        <div className="relative h-screen w-screen bg-black overflow-hidden flex flex-col font-mono select-none" onClick={initAudio}>
          <div className="absolute inset-0 pointer-events-none bg-[radial-gradient(circle,_transparent_30%,_rgba(150,0,0,0.4)_100%)]"></div>
          
          {showScare && (
            <div className="absolute inset-0 z-[110] bg-red-950 flex items-center justify-center overflow-hidden">
              <Ghost size={400} className="text-red-500 opacity-90 animate-ping absolute" />
              <div className="text-white text-9xl font-black opacity-10 tracking-widest">HELP</div>
              <div className="absolute top-0 left-0 w-full h-full opacity-40 mix-blend-overlay bg-[url('https://picsum.photos/1000/1500?grayscale')] grayscale scale-150 -rotate-12 blur-sm"></div>
            </div>
          )}

          <div className="p-4 bg-red-950/90 flex items-center justify-between border-b border-red-600 z-10">
            <div className="flex items-center gap-2">
              <ShieldAlert className="text-red-500 animate-pulse" size={22} />
              <h1 className="text-sm font-black uppercase tracking-tighter glitch-text leading-none">SYSTEM_BREACH</h1>
            </div>
            <div className="text-[10px] bg-red-600 text-black px-1 font-bold">LOCKED</div>
          </div>

          <div className="flex-1 p-4 flex flex-col gap-4 overflow-hidden">
            <div className="flex-1 bg-black/80 border border-red-900/40 p-3 rounded-lg flex flex-col overflow-hidden backdrop-blur-sm">
              <div className="flex items-center justify-between mb-2 text-red-600 text-[10px] border-b border-red-900/20 pb-1">
                <span className="flex items-center gap-1 font-bold"><Radio size={10} /> REMOTE_LISTEN: ACTIVE</span>
                <span className="animate-pulse">REC ●</span>
              </div>
              <div className="flex-1 overflow-y-auto space-y-1 text-[11px] leading-tight">
                {logs.map((log, idx) => (
                  <div key={idx} className="flex gap-2 text-red-800">
                    <span className="opacity-40">[{idx}]</span>
                    <span className={idx === logs.length - 1 ? 'text-red-400 font-bold' : ''}>
                      {log}
                    </span>
                  </div>
                ))}
                <div ref={logEndRef} />
              </div>
            </div>

            <div className="bg-red-950/30 border border-red-600/40 p-5 rounded-xl text-center relative overflow-hidden">
              <div className="relative z-10">
                <Eye size={40} className="mx-auto mb-3 text-red-600 opacity-80" />
                <h2 className="text-lg font-black mb-1 glitch-text uppercase tracking-widest text-red-500">I AM WATCHING</h2>
                <p className="text-red-600/80 text-[10px] leading-relaxed mb-5 px-4 font-bold italic">
                  Every click you take... I'm already inside.
                </p>
                
                <div className="space-y-3">
                  <input
                    type="text"
                    value={inputText}
                    onChange={handleInputChange}
                    placeholder="BYPASS_CODE"
                    autoComplete="off"
                    className="w-full bg-black/60 border-2 border-red-900/50 p-4 text-center text-red-500 focus:outline-none focus:border-red-600 transition-all uppercase tracking-[0.5em] text-sm font-black rounded-lg"
                    autoFocus
                  />
                </div>
              </div>
            </div>
          </div>

          <div className="p-3 bg-red-950/80 flex justify-between items-center text-[9px] uppercase tracking-widest text-red-600 border-t border-red-700/40 font-black">
            <div className="flex gap-4">
              <span className="flex items-center gap-1"><AlertTriangle size={10} /> FAN_FAIL</span>
              <span className="flex items-center gap-1 text-red-400">72°C <Activity size={8}/></span>
            </div>
            <div className="animate-pulse bg-red-600 text-black px-1">UPLOADING_SENSITIVE_DATA...</div>
          </div>

          <button 
            onClick={() => {
                document.documentElement.requestFullscreen().catch(() => {});
                initAudio();
            }}
            className="fixed bottom-20 right-4 w-12 h-12 rounded-full bg-red-600/5 flex items-center justify-center border border-red-600/10 z-[120]"
          >
            <Power size={16} className="text-red-600/20" />
          </button>
        </div>
      );
    };

    const rootElement = document.getElementById('root');
    if (rootElement) {
      const root = ReactDOM.createRoot(rootElement);
      root.render(<App />);
    }
  </script>
</body>
</html>
